function Area(e){function i(){if(h.areaList.length>0){var e=h.areaList.filter(function(e){return"1"==e.level});s(e)}else $.get(__BASEURL__+"area_api/get_all",function(e){if(e.success){h.areaList=e.data.items;var i=h.areaList.filter(function(e){return"1"==e.level});s(i)}})}function s(e){l.html(""),d.html(""),$.each(e,function(i){l.append('<option value="'+e[i].id+'">'+e[i].name+"</option>");var s=h.areaList.filter(function(s){return s.pid==e[i].id});c(e[i].id,s)}),a(),n(),l.find("option").eq(0).prop("selected",!0),d.find(".js_citys_list").eq(0).removeClass("hide")}function c(e,i){var s='<li><label class="checkbox-inline"><span class="u-checkbox"><input class="js_citys_checkall" type="checkbox" value="'+e+'"><span class="checkbox-icon"></span></span>全选</label></li>';$.each(i,function(e){s+='<li><label class="checkbox-inline"><span class="u-checkbox"><input class="js_citys_checkitem" type="checkbox" data-id="'+i[e].id+'" data-name="'+i[e].name+'"><span class="checkbox-icon"></span></span>'+i[e].name+"</label></li>"}),d.append('<ul id="city_'+e+'" class="region-list js_citys_list hide">'+s+"</ul>")}function t(){var e=[],i=[];return $(".js_citys_checkall").each(function(s){var c=$(this).parents(".js_citys_list"),t=c.find(".js_citys_checkitem"),a=t.length,n=c.find(".js_citys_checkitem:checked"),d=n.length,h=$(this).val(),o=l.find("[value="+h+"]").text();if(a==d)e.push(h),i.push(o);else if(d>0){var r=[];$.each(n,function(i){var s=$(this).attr("data-id"),c=$(this).attr("data-name");e.push(s),r.push(c)}),i.push(o+"["+r.join("、")+"]")}}),{selectedArea:e,selectedRegion:i}}function a(){$.each(h.disabledList,function(e){if(h.disabledList[e]%1e4==0){var i=$('.js_citys_checkall[value="'+h.disabledList[e]+'"]');i.prop("disabled",!0),i.parents(".js_citys_list").find(".js_citys_checkitem").prop("disabled",!0)}else if(h.disabledList[e]%100==0){var s=$('.js_citys_checkitem[data-id="'+h.disabledList[e]+'"]');s.prop("disabled",!0)}else console.log("地区")})}function n(){$.each(h.checkedList,function(e){if(h.checkedList[e]%1e4==0){var i=$('.js_citys_checkall[value="'+h.checkedList[e]+'"]');i.prop("disabled")||(i.prop("checked",!0),i.parents(".js_citys_list").find(".js_citys_checkitem").each(function(){$(this).prop("disabled")||$(this).prop("checked",!0)}))}else if(h.checkedList[e]%100==0){var s=$('.js_citys_checkitem[data-id="'+h.checkedList[e]+'"]');s.prop("disabled")||s.prop("checked",!0)}else console.log("地区")})}var l=$(".js_province_list"),d=$("#js_citys_box"),h=this;return h.areaList=e&&e.areaList?e.areaList:[],h.disabledList=e&&e.disabledList?e.disabledList:[],h.checkedList=e&&e.checkedList?e.checkedList:[],i(),l.on("change",function(){var e=$(this).val();$(".js_citys_list").addClass("hide"),$("#city_"+e).removeClass("hide")}),d.on("click",".js_citys_checkall",function(){var e=$(this).prop("checked"),i=$(this).parents(".js_citys_list");i.find(".js_citys_checkitem").each(function(){var i=$(this).prop("disabled");i?$(this).prop("checked",!1):$(this).prop("checked",e)}),t()}),d.on("click",".js_citys_checkitem",function(){var e=$(this).parents(".js_citys_list"),i=e.find(".js_citys_checkitem").length,s=e.find(".js_citys_checkitem:checked").length;i!==s?e.find(".js_citys_checkall").prop("checked",!1):e.find(".js_citys_checkall").prop("checked",!0),t()}),{getSelectedArea:t}}