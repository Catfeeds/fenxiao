$(function(){function t(){l=GetQueryString("status")||"",i.val(l)}function a(t){$.getJSON(__BASEURL__+"mshop/finance_api/withdraw_list",{current_page:t||1,page_size:r,shop_id:g,status:l},function(n){if(n.success){var e=Math.ceil(+n.data.total/r);$("#withdrawTbody").html(template(u,n.data)),laypage({cont:"withdrawPage",pages:e,curr:t||1,skin:"#5aa2e7",first:1,last:e,skip:!0,prev:"&lt",next:"&gt",jump:function(t,n){n||(a(t.curr),d=t.curr)}})}else new Msg({type:"danger",msg:n.msg})})}function n(t){var n=o.data("id");$.post(__BASEURL__+"mshop/finance_api/update_status",autoCsrf({id:n,status:t}),function(t){t.success?(new Msg({type:"success",msg:t.msg}),a(d)):new Msg({type:"danger",msg:t.msg}),o.modal("hide")})}function e(t){o.data("id",t).modal("show")}var s=$("#shop"),i=$("#status"),o=$("#remitModal"),c=$("#btn-remited"),u=document.getElementById("withdrawTpl").innerHTML,d=1,r=10,g=s.val(),l=i.val();t(),a(),s.on("change",function(){g=s.val(),a(1)}),i.on("change",function(){l=i.val(),a(1)}),c.on("click",function(){n("1")}),window.openRemitModal=e});