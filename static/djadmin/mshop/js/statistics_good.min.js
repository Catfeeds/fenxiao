$(function(){function t(){function t(t,e){y=t.format("YYYY-MM-DD")+" - "+e.format("YYYY-MM-DD"),n.val(y),a(1)}n.daterangepicker({startDate:d,endDate:i,maxDate:i,applyClass:"btn-primary",cancelClass:"btn-default",locale:{applyLabel:"确认",cancelLabel:"取消",fromLabel:"起始时间",toLabel:"结束时间",customRangeLabel:"自定义",daysOfWeek:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],firstDay:1,format:"YYYY-MM-DD"},ranges:{"今日":[moment(),moment()],"昨日":[moment().subtract(1,"days"),moment().subtract(1,"days")],"最近7日":[moment().subtract(6,"days"),moment()],"最近30日":[moment().subtract(29,"days"),moment()]}},t)}function a(t){t=t||1,$.getJSON(__BASEURL__+"mshop/statistics_api/goods_info",{current_page:t,page_size:p,shop_id:f,service:g,measure_type:Y,time:y,sort_number_type:_,sort_money_type:v},function(e){if(e.success){var s=Math.ceil(+e.data.total/p);$("#goodTbody").html(template(l,{rows:e.data.rows,current_page:t,page_size:p})),laypage({cont:"goodPage",pages:s,curr:t||1,skin:"#5aa2e7",first:1,last:s,skip:!0,prev:"&lt",next:"&gt",jump:function(t,e){e||(a(t.curr),u=t.curr)}})}})}var e=$("#shop"),s=$("#service"),o=$("#measure_type"),n=$("#time"),r=$(".sort-ctrl"),c=$("#sort-sale-num"),m=$("#sort-sale-money"),l=document.getElementById("goodTpl").innerHTML,d=moment().subtract(29,"days"),i=moment(),u=1,p=10,f=e.val(),g=s.val(),Y=o.val(),y=d.format("YYYY-MM-DD")+" - "+i.format("YYYY-MM-DD"),_="desc",v="";t(),a(),e.on("change",function(){f=e.val(),a(1)}),s.on("change",function(){g=s.val(),a(1)}),o.on("change",function(){Y=o.val(),a(1)}),c.on("click",function(){var t=$(this);r.removeClass("sort-up sort-down"),v="",_&&"asc"!=_?"desc"==_&&(t.addClass("sort-up"),_="asc"):(t.addClass("sort-down"),_="desc"),a(1)}),m.on("click",function(){var t=$(this);r.removeClass("sort-up sort-down"),_="",v&&"asc"!=v?"desc"==v&&(t.addClass("sort-up"),v="asc"):(t.addClass("sort-down"),v="desc"),a(1)})});