(function(e){"function"!=typeof define||!define.amd&&!define.cmd||jQuery?"object"==typeof module&&module.exports?module.exports=function(a,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(a)),e(n),n}:e(jQuery):define(["jquery"],e)})(function(e){e.support.cors=!0,e.fn.areapicker=function(a){var n={dataUrl:__BASEURL__+"area_api/get_all",dataType:"json",provinceField:"province",cityField:"city",areaField:"area",required:!1,province:0,city:0,area:0},i=e.extend({},n,a);return this.each(function(){var a=e(this),n=a.find('select[name="'+i.provinceField+'"]'),t=a.find('select[name="'+i.cityField+'"]'),o=a.find('select[name="'+i.areaField+'"]');e.ajax({url:i.dataUrl,type:"GET",dataType:i.dataType,success:function(a){if(a.success){a=a.data.items;var d,c,r,p=function(){d=[],c=[],r=[],d=a.filter(function(e){return"1"==e.level}),c=a.filter(function(e){return e.pid==i.province&&"2"==e.level}),r=a.filter(function(e){return e.pid==i.city&&"3"==e.level})},u={province:function(){if(n.empty(),i.required||n.append('<option data-code="" data-name="" value="">请选择</option>'),e.each(d,function(e,a){n.append('<option data-code="'+d[e].id+'" data-name="'+d[e].name+'" value="'+d[e].id+'">'+d[e].name+"</option>")}),i.province){var a=i.province;n.val(a)}this.city()},city:function(){if(t.empty(),i.required||t.append('<option data-code="" data-name="" value="">请选择</option>'),e.each(c,function(e,a){t.append('<option data-code="'+c[e].id+'" data-name="'+c[e].name+'" value="'+c[e].id+'">'+c[e].name+"</option>")}),i.city){var a=i.city;t.val(a)}this.area()},area:function(){if(o.empty(),i.required||o.append('<option data-code="" data-name="" value="">请选择</option>'),e.each(r,function(e,a){o.append('<option data-code="'+r[e].id+'" data-name="'+r[e].name+'" value="'+r[e].id+'">'+r[e].name+"</option>")}),i.area){var a=i.area;o.val(a)}}};n.on("change",function(){i.province=e(this).find("option:selected").data("code")||0,i.city=0,i.area=0,p(),u.city()}),t.on("change",function(){i.city=e(this).find("option:selected").data("code")||0,i.area=0,p(),u.area()}),o.on("change",function(){i.area=e(this).find("option:selected").data("code")||0}),p(),u.province()}}})})}});